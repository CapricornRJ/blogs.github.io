<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <title>静态库与动态库介绍</title>
    <link rel="stylesheet" href="../pageStyle.css" media="all">
    <link rel="stylesheet" href="../article.css" media="all">
    <link rel="stylesheet" href="depotIntroduce.css" media="all">
</head>
<body>
    <div class="article">
        <h1 class="title">静态库与动态库介绍</h1>
        <blockquote><p>这里主要介绍查看静态库与动态库的区别，查看他们支持的平台架构，以及架构的拆分与合并，和上架APP Store需要注意的事项</p></blockquote>
        <!--静态库和动态库的存在形式-->
        <h2>一、静态库和动态库的存在形式</h2>
        <p>静态库：.a 和 .framework<br>动态库：.dylib 和 .framework</p>
        <p>注意：两者都有framework的格式</p>
        <!--静态库和动态库在使用上的区别-->
        <h2>二、静态库和动态库在使用上的区别</h2>
        <p>静态库：链接时，静态库会被完整地复制到可执行文件中，被多次使用就有多份冗余拷贝<br>
            动态库：链接时不复制，程序运行时由系统动态加载到内存，供程序调用，系统只加载一次，多个程序共用，节省内存<br>
            需要注意的是： 项目中如果使用了自制的动态库，不能被上传到AppStore</p>
        <!--iOS设备有哪些架构-->
        <h2>三、iOS设备有哪些架构</h2>
        <dl>
            <dt>模拟器：</dt>
        </dl>
        <table>
            <tr>
                <th>CPU架构</th>
                <th>机型</th>
            </tr>
            <tr>
                <td>i386</td>
                <td>iPhone4s-iPnone5</td>
            </tr>
            <tr>
                <td>x86_64</td>
                <td>iPhone5s-iPhone X</td>
            </tr>
        </table>
        <dl>
            <dt>真机:</dt>
        </dl>
        <table>
            <tr>
                <th>CPU架构</th>
                <th>机型</th>
            </tr>
            <tr>
                <td>armv7</td>
                <td>iPhone3gs-iPhone4s</td>
            </tr>
            <tr>
                <td>armv7s</td>
                <td>iPhone5-iPhone5c</td>
            </tr>
            <tr>
                <td>arm64</td>
                <td>iPhone5s-iPhone X</td>
            </tr>
        </table>
        <!--查看静态库支持的框架-->
        <h2>四、查看静态库支持的框架</h2>
        <p>lipo -info 静态库名字</p>
        <img class="image-view" src="../Resource/depotIntroduce_1.gif">
        <p>lipo -info framework下的二进制文件名字</p>
        <img class="image-view" src="../Resource/depotIntroduce_2.gif">
        <!--动态库上架条件-->
        <h2>五、动态库上架条件</h2>
        <p>1、动态库在 最低支持iOS 8.0以上的项目可以上架<br>2、需要删除i386、x86_64的架构包，否则上传ituns Connection构建版本时会报错，苹果强制要求</p>
        <!--删除CPU架构-->
        <h2>六、删除i386、x86_64</h2>
        <p>以环信为例,先cd到HyphenateLite.framework目录下</p>
        <pre><code class="Objective-C">lipo HyphenateLite.framework/HyphenateLite -thin armv7 -output HyphenateLite_armv7
lipo HyphenateLite.framework/HyphenateLite -thin arm64 -output HyphenateLite_arm64
lipo -create HyphenateLite_armv7 HyphenateLite_arm64 -output HyphenateLite
mv HyphenateLite HyphenateLite.framework/</code></pre>
    </div>
</body>
</html>